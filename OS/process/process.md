# 进程

## 特征
1:动态性:由创建而产生，得不到资源而暂停执行，以及由撤销而消亡
2:并发性多道并发
3:独立：是一个能独立运行获得资源和独立调度的基本单位
4:异步性:进程按各自独立，不可预知的速度向前推进
5:结构特征：程序段，代码段，数据段


## 进程状态

### 就绪ready
当进程已分配到除CPU以为的所有必要的资源，等待执行

### 运行 running
某进程占有CPU并在CPU上执行其程序

### 阻塞 blocked
由于发生某种事件而不能继续运行下去
### 进程结构
由下往上
- text :包含了进程运行的程序机器语言指令，只有只读属性，
以防止进程通过错误指针修改自身命令，因为多个进程可以同时运行同一程序，所以文本段也可以设为共享

- data :
1. 初始化数据段 包含显示初始化的全局变量和静态变量。当程序加载到内存时，从可执行文件中读取这些变量的值。
2. 为初始化数据段
- heap :是可在运行时（为变量）动态进行内存分配的一块区域。堆顶端称为program break。

- stack :是一个动态增长和收缩的段，有栈帧（stack frames）组成。系统会为每个当前调用的函数分配一个栈帧。栈帧中存储了函数的局部变量（所谓自动变量）、实参和返回值。

## PCB

1:操作系统根据PCB来控制和管理并发执行的进程
2：由操作系统进程管理模块维护
3：常驻内存
4：上下文切换需要保存的进程状态字
### PCB结构模块

- 进程管理

- 内存管理

- 文件管理
### 进程包含的结构
1：process state 进程状态
2: program counter  程序计数器
3:CPU register CPU寄存器
4:CPU schedule information CPU调度信息
5:Memory-management information  内存管理信息
6:Accounting information
7:I/O status information   I/O的状态信息

## 进程调度
参考 (https://github.com/pipixia626/blog/blob/main/OS/schedule-process.md)


## 进程间通信 IPC(Interprocess Communication)

1:消息传递：数据量少的，容易实现，通过system call来传递(send,receive)
2：共享内存：更快，system call 只能实现shared memory部分

1. 管道pipe：管道是一种半双工的通信方式，数据只能单向流动，而且只能在具有亲缘关系的进程间使用。进程的亲缘关系通常是指父子进程关系。<br>
2. 命名管道FIFO：有名管道也是半双工的通信方式，但是它允许无亲缘关系进程间的通信。<br>
3. 匿名管道，可在同一台计算机的不同进程之间或在跨越一个网络的不同计算机的不同进程之间，支持可靠的、单向或双向的数据通信。<br>
4. 消息队列MessageQueue：消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。<br>
5. 共享存储SharedMemory：共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。共享内存是最快的 IPC 方式
，它是针对其他进程间通信方式运行效率低而专门设计的。
它往往与其他通信机制，如信号两，配合使用，来实现进程间的同步和通信。<br>
6. 信号量Semaphore：信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。
因此，主要作为进程间以及同一进程内不同线程之间的同步手段。<br>
7. 套接字Socket：套解口也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同及其间的进程通信。<br>
8. 信号 ( sinal ) ： 信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。<br>


## 消息队列和管道的区别
消息队列：用于消息，不是简单的数据信息传递，消息队列还包括消息有优先级、消息到达通知等丰富内容。

管道：低级的通信机制，消息队列比管道高级多了，管道分PIPE和FIFO，PIPE是无名的，所以只能在进程内或父子进程间通信，FIFO可任何两个进程间通信了。
不过这两个依然比较低级，完成高级的应用服务器还需要消息队列等

