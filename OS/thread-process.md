
## 进程和线程的区别

### 根本区别：
进程是操作系统资源分配的基本单位，线程是处理任务调度和执行的基本单位

### 资源开销：
每个进程都有独立的代码和数据空间（程序上下文），程序之间切换会有较大的开销；
线程可以看做是轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己的独立的运行栈和程序计数器（PC)

### 包含关系：
一个进程可以包含多个线程

### 内存分配：
进程之间是相互独立的，同一进程间的线程共享进程的地址空间和资源

影响关系：进程之间不会相互影响，同一进程下的线程会因为某一个线程崩溃而整个进程killed

### 执行过程：
每个独立的进程有程序运行的入口、顺序执行序列和程序出口。但是线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制，两者均可并发执行



# 另外一个方式比较
## 映像组成

- 进程
由程序段，相关数据和PCB构成

- 线程
共享隶属进程的进程映像，仅拥有线程ID、寄存器和堆栈

## 并发性
在没有引入线程的操作系统中 ，进程是独立运行的基本单位

线程是独立运行的基本单位，一个进程可以用于一个或多个线程

## 资源分配
进程是资源分配和拥有的基本单位
线程自己基本不拥有系统资源，但它可访问所属进程所拥有的全部资源

## 调度
在没有引入线程的操作系统中，进程是独立调度和分配的基本单位
在引入线程后的操作系统中，线程是独立调度和分派的基本单位

## 通信
PV操作，共享存储，消息传递，管道通信

同一进程的各线程直接读写进程数据段
不同进程的线程直接通信属于进程通信

## 系统开销
进程切换时涉及当前CPU环境的保持及新进程CPU环境的设置，上下文切换开销大

线程切换时只需保存和设置少量寄存器内容，开销很小

## 地址空间
进程的地址空间之间相互独立

同一进程的各线程共享进程的地址空间

## update
1. 进程是资源分配的基本单位，由于其进程切换开销比较大，需要更新页面空间，而线程不用，所以线程成为CPU调度单位

2. 进程是独立逻辑地址空间的，不同的进程占有不同的内存，而线程是共享进程的地址空间，具体是共享全局数据区，代码区，堆区，而线程可以看作是函数调用，所以只有线程自己的栈(保存函数返回值，参数，局部变量等)，程序计数器(记录CPU指令运行的位置，用于保存和恢复线程运行)还有相关的寄存器可以是私有的

3. 多进程程序因为独立地址空间，所以隔离性和安全性会高很多，同步简单，它们之间的通信是通过进程间通信来完成的，而线程间通信是通过信号量，条件变量和互斥锁完成的

4. 多进程很少发生内存泄露，但进程退出后，其内存就会自动释放，而多线程需要自己用完便释放

5. 多进程程序中，子进程完成所有父进程资源的复制，同时会拷贝所有文件描述符，仅fork时子进程会继承父进程fork之前设置的信号处理方式，并且是写时复制，也就是如果子进程不修改则和父进程共享同一份资源，只需要修改时才复制一份