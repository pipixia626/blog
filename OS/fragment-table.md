# 分段和分页的区别

## 分页存储管理

### 基本思想

用户程序的地址空间被划分成若干个固定大小的区域，称为“页”,相应地，内存空间分成若干个物理块，页和块的大小相等，可将用户程序的任一页
放在内存的任一块中，实现离散分配

若给定一个逻辑地址为A，页面大小为L，则
页号P=INT[A/L]，页内地址W=A  MOD  L

### 页表
分页系统中，允许将进程的每一页离散地存储在内存的任一物理块中，为了能在内存中找到每个页面对应的物理块，
系统为每个进程建立一张页面映射表，简称页表。页表的作用是实现从页号到物理块号的地址映射。

### 页表：

页号 物理块号 存取控制   

  0        2    

  1       15（F）    

  2       14（E）    

  3       1  

## 分段存储管理

### 基本思想
将用户程序地址空间分成若干个大小不等的段，每段可以定义一组相对完整的逻辑信息。存储分配时，以段为单位，段与段在内存中可以不相邻接，
也实现了离散分配。
###  段表
段号 段长 起始地址 存取控制   

0     1K     4096    

1     4K     17500    

2     2K     8192  

## 区别：

### 目的

页是信息的物理单位，分页是为实现离散分配方式，以消减内存的外零头，提高内存的利用率，出于系统管理的需要而不是用户需要
端是信息的逻辑单位，含有一组其意义相对完整的信息，分段的目的是为了更好地满足用户的需要

### 长度
在linux中，默认页的大小为4KB，1MB->256页
页的大小固定而且由系统决定，由系统把逻辑地址分为页号和页内地址两部分，是由机器硬件实现的
段的长度不固定，由用户所编写的程序决定，通常由编译程序对程序编译时，根据信息的性质来划分

### 地址空间

分页的作业地址空间是一维的.
分段的地址空间是二维的.段的长度由相应的逻辑信息组的长度决定，因而各段长度不等。整个作业的地址空间是二维的。

### 碎片

【内部碎片】
内部碎片就是已经被分配出去（能明确指出属于哪个进程）却不能被利用的内存空间；
内部碎片 是处于 （操作系统分配的用于装载某一进程的内存）区域内部 或页面内部 的存储块。占有这些区域或页面的进程并不使用这个 存储块。而在进程占有这块存储块时，系统无法利用它。直到进程释放它，或进程结束时，系统才有可能利用这个存储块。
单道连续分配只有内部碎片。 多道固定连续分配既有内部碎片，又有外部碎片。
【外部碎片】
外部碎片指的是还没有被分配出去（不属于任何进程），但由于太小了无法分配给申请内存空间的新进程的内存空闲区域。
外部碎片是处于任何两个已分配区域或页面之间的空闲存储块。这些存储块的总和可以满足当前申请的长度要求，但是由于它

### 绝对地址

分页有内部碎片无外部碎片

分段有外部碎片无内部碎片
处理器使用页号和偏移量计算绝对地址

处理器使用段号和偏移量计算绝对地址
### 管理方式

对于分页，操作系统必须为每个进程维护一个页表，以说明每个页对应的的页框。当进程运行时，它的所有页都必须在内存中，除非使用覆盖技术或虚拟技术，另外操作系统需要维护一个空闲页框列表。

对于分段，操作系统必须为每个进程维护一个段表，以说明每个段的加载地址和长度。当进程运行时，它的所有短都必须在内存中，除非使用覆盖技术或虚拟技术，另外操作系统需要维护一个内存中的空闲的空洞列表。

### 共享和动态链接
分页不容易实现，分段容易实现
