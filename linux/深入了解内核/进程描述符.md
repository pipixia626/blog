# 进程

进程就是任务

## 进程状态

## 进程标识符

标识一个进程
## 进程描述符
task_struct包含
1. 标识符
2. 状态
3. 优先级
4. 内存指针
5. 程序计数器
6. 上下问数据
7. I/O状态信息
8. 记账信息
## 任务数组
进程是动态实体，在系统中的生命周期不定，内核在自己的地址空间保持了一个全局静态数组task，数组的元素就是进程描述符指针

## 进程描述符的存放
task数组仅仅包含了进程描述符的指针而不是描述符本身

## 进程链表
表头为init进程
是一个双向循环链表，顺序执行进程

pidhash利用链接表来处理冲突的PID

## 进程之间的亲属关系

p_opttr -祖先(origin parent)
p_pptr  -父进程(parent)
p_cptr -子进程(child)

## 进程切换

### 硬件上下文
每个进程可以拥有属于自己的地址空间，但所有成员必须共享CPU寄存器，因此，恢复一个进程的执行之前，内核必须确保每个寄存器装入了挂起进程的值

### 上下文切换
进程管理中最重要的一步要进行进程上下文切换，其中主要有两大步骤：地址空间切换和处理器状态切换（硬件上下文切换），前者保证了进程回到用户空间之后能够访问到自己的指令和数据（其中包括减小tlb清空的ASID机制），后者保证了进程内核栈和执行流的切换，会将当前进程的硬件上下文保存在进程所管理的一块内存，然后将即将执行的进程的硬件上下文从内存中恢复到寄存器，有了这两步的切换过程保证了进程运行的有条不紊，当然切换的过程是在内核空间完成，这对于进程来说是透明的。
## 内核线程
每个内核线程执行一个单独的内核函数，执行内核一些周期性的任务，因为没有进程间的上下文切换，所以相对于进程来说效率会高一些