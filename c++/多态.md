# c++中的多态机制

## 虚函数

在类的定义中，带有virtual关键字的成员函数称为虚函数

```
class Base 
{
    virtual int Fun() ; // 虚函数
};

int Base::Fun() // virtual 字段不用在函数体时定义
{ }
```

## 多态表现形式

1：派生类的指针赋给基类指针

通过基类指针调用基类和派生类中同名虚函数时：

调用哪个虚函数，取决于指针对象指向哪种类型的对象
```
class CFather 
{
public:
    virtual void Fun() { } // 虚函数
};

// 派生类
class CSon : public CFather 
{ 
public :
    virtual void Fun() { }
};

int main() 
{
    CSon son;
    CFather *p = &son;
    p->Fun(); //调用哪个虚函数取决于 p 指向哪种类型的对象
    return 0;
}

```
2：派生类的对象可以赋给基类引用
调用哪个虚函数，取决于引用的对象是哪种类型的对象

```
// 基类
class CFather 
{
public:
    virtual void Fun() { } // 虚函数
};

// 派生类
class CSon : public CFather 
{ 
public :
    virtual void Fun() { }
};

int main() 
{
    CSon son;
    CFather &r = son;
    r.Fun(); //调用哪个虚函数取决于 r 引用哪种类型的对象
    return 0;
}
}
```




