
# 野指针


## 空指针，零指针，野指针

### 空指针常量
指针赋值常用的一些值
0、0L、'\0'、3 - 3、0 * 17 （它们都是“integer constant expression”）以及 (void*)0 （我觉得(void*)0应该算是一个空指针吧，更恰当一点）等都是空指针常量（注意 (char*) 0 不叫空指针常量，只是一个空指针值）。至于系统选取哪种形式作为空指针常量使用，则是实现相关的。一般的 C 系统选择 (void*)0 或者 0 的居多（也有个别的选择 0L）；至于 C++ 系统，由于存在严格的类型转化的要求，void* 不能象 C 中那样自由转换为其它指针类型，所以通常选 0 作为空指针常量（C++标准推荐），而不选择 (void*)0。

### 空指针
如果 p 是一个指针变量，则 p = 0; p = 0L; p = '\0'; p = 3 - 3; p = 0 * 17; 中的任何一种赋值操作之后（对于 C 来说还可以是 p = (void*)0;）， p 都成为一个空指针，由系统保证空指针不指向任何实际的对象或者函数。反过来说，任何对象或者函数的地址都不可能是空指针。（比如这里的(void*)0就是一个空指针。把它理解为null pointer还是null pointer constant会有微秒的不同，当然也不是紧要了）。其实空指针只是一种编程概念，就如一个容器可能有空和非空两种基本状态。

### null指针
标准规定的宏定义，用来表示空指针常量
除了上面的各种赋值方式之外，还可以用p=null//nullptr来使p称为一个空指针

### 零指针
零值指针，值为0的指针，可以是任何一种指针类型，可以是通用变体类型void* ,也可以是char*,int* 等等

### 空指针指向了什么地方
一般指向0地址
### 空指针实现的保护政策
NULL指针分配的分区：其范围是从 0x00000000到0x0000FFFF。这段空间是空闲的，对于空闲的空间而言，没有相应的物理存储器与之相对应，所以对这段空间来说，任何读写操作都是会引起异常的。空指针是程序无论在何时都没有物理存储器与之对应的地址。为了保障“无论何时”这个条件，需要人为划分一个空指针的区域，固有上面NULL指针分区。

### null和nullptr(c++11)
用以解决NULL在隐式转换和作为函数传入参数时的二义性问题。
C++中不能将void  * 类型的指针隐式转换成其他指针类型
NULL即是整数，也是指针

nullptr并非整型类别，也不是指针类型，但是能转换成任意指针类型
实际的类型是std::nullptr_t

nullptr可以转换为任意类型的指针从而更好地在处理更严格的类型检查时
### 野指针
指向不可用内存区域的指针
对野指针进行操作将会使程序发生不可预知的错误，甚至可能直接引起崩溃。

野指针不是NULL指针，是指向“垃圾”内存的指针。人们一般不会错用NULL指针，因为用if语句很容易判断。但是野指针是很危险的，也具有很强的掩蔽性，if语句对它不起作用。
造
## 野指针的产生和避免

### 指针变量没有初始化

### 指针指向的内存被释放了，而指针本身置空

### 指针超过了变量的作用范围
这一般发生在将调用函数中的局部变量的地址传出来引起的。这点容易被忽略，虽然代码是很可能可以执行无误，然而却是极其危险的。局部变量的作用范围虽然已经结束，内存已经被释放，然而地址值仍是可用的，不过随时都可能被内存管理分配给其他变量。

使用智能指针

参考：  [动态内存](https://github.com/pipixia626/C-plusplus/blob/master/ch12/note.md)
