# 树

各类树应用场景：

- B和B+树：文件系统以及数据库索引

- AVL树，windows对进程地址空间的管理

- 红黑树 C++STL (map,set)

## 二叉搜索树

### 概念
平衡二叉树是采用二分法思维把数据按规则组装成一个树形结构的数据，用这个树形结构的数据减少无关数据的检索，大大的提升了数据检索的速度。

在二叉树的深度遍历过程中，使用中序遍历，就能获取得到有序的序列。

查找数据时间复杂度最好是logn（二分查找）,最坏是n(线性表)


## B树
多路平衡查找树
B树大多用在磁盘上用于查找磁盘的地址。因为磁盘会有大量的数据，有可能没有办法一次将需要的所有数据加入到内存中，所以只能逐一加载磁盘页，每个磁盘页就对应一个节点，而对于B树来说，B树很好的将树的高度降低了，这样就会减少IO查询次数，虽然一次加载到内存的数据变多了，但速度绝对快于AVL或是红黑树的

访问节点（读取磁盘）次数与树的高度成正比，虽然高度都是对数数量级的，但是显然B树中的log函数的底比2更大
## B+树
B+树时B树的一种升级版本，B+树查找的效率要比B树更高、更稳定
文件的目录一级一级索引,只有最底层的叶子节点(文件)保存数据.),非叶子节点只保存索引,不保存实际的数据,数据都保存在叶子节点中

### B树相对于B+树的优点

1. B+树的层级更少：相较于B树，B+每个非叶子节点存储的关键字数更多，树的层级更少所以查询数据更快；

2. B+树查询速度更稳定：B+所有关键字数据地址都存在叶子节点上，所以每次查找的次数都相同所以查询速度要比B树更稳定;

3. B+树天然具备排序功能：B+树所有的叶子节点数据构成了一个有序链表，在查询大小区间的数据时候更方便，数据紧密性很高，缓存的命中率也会比B树高。

4. B+树全节点遍历更快：B+树遍历整棵树只需要遍历所有的叶子节点即可，，而不需要像B树一样需要对每一层进行遍历，这有利于数据库做全表扫描。

B树相对于B+树的优点是，如果经常访问的数据离根节点很近，而B树的非叶子节点本身存有关键字其数据的地址，所以这种数据检索的时候会要比B+树快。

5. B+树只有叶子节点存放数据，而其他节点只存放索引，而B树每个节点都有Data域。所以相同大小的节点B+树包含的索引比B树的索引更多（因为B树每个节点还有Data域）
6. B+树的叶子节点是通过链表连接的，所以找到下限后能很快进行区间查询，比B树中序遍历快
## AVL树
带有平衡条件的二叉搜素树，所有节点的左右子树高度差不超过1

由于旋转是非常耗时的，因此AVL树适合用于插入删除次数比较少，但查找情况比较多

### 保持平衡的四种
LL
RR
LR
RL

## 红黑树

自平衡的二叉查找树

可在logN时间内完成查找，增加，删除操作

### 性质

- 节点是红色或黑色
- 根是黑色
- 所有叶子节点都是黑色
- 每个红色节点必须有两个黑色的子节点(从每个叶子到根的所有路径上不能有两个连续的红色节点)
- 从任一节点到其每个叶子节点的所有简单路径都包含相同数目的黑色节点
  - (保证任意节点到其每个叶子节点最长路径不会超过最短路径的2倍)
  - 任意一节点到每个叶子节点的路径都包含相同数量的黑丝节点


### 相对于平衡二叉树的优势
1. 平衡二叉树追求绝对的平衡，左右子树高度差不超过1，因此插入删除操作下，红黑树的旋转次数少，效率高